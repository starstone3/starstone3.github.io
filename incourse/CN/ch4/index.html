<!DOCTYPE html><html lang="zh" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="starstone3">
      
      
        <link rel="canonical" href="https://starstone3.github.io/incourse/CN/ch4/">
      
      
        <link rel="prev" href="../ch3/">
      
      
        <link rel="next" href="../ch5/">
      
      
        
      
      
      <link rel="icon" href="../../../image/fav1.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>第四章:网络层 - Starstone3's bed</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      
  
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
  
  <style>:root{--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20576%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M288%2064a32%2032%200%201%200%200%2064%2032%2032%200%201%200%200-64m-96%2032c0-53%2043-96%2096-96s96%2043%2096%2096c0%2041.8-26.7%2077.4-64%2090.5v257.9c62.9-14.3%20110.2-69.7%20111.9-136.5L415.8%20322c-10%208.7-25.1%207.7-33.9-2.3s-7.7-25.1%202.3-33.9l64-56c9-7.9%2022.6-7.9%2031.6%200l64%2056c10%208.7%2011%2023.9%202.3%2033.9s-23.9%2011-33.9%202.3L496%20307.9C493.9%20421%20401.6%20512%20288%20512S82.1%20421%2080%20307.9l-16.2%2014.2c-10%208.7-25.1%207.7-33.9-2.3s-7.7-25.1%202.3-33.9l64-56c9-7.9%2022.6-7.9%2031.6%200l64%2056c10%208.7%2011%2023.9%202.3%2033.9s-23.9%2011-33.9%202.3L144.1%20308c1.8%2066.8%2049.1%20122.2%20111.9%20136.5V186.6c-37.3-13.2-64-48.7-64-90.5z%22/%3E%3C/svg%3E');--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22m368.5%2018.3-50.1%2050.1%20125.3%20125.3%2050.1-50.1c21.9-21.9%2021.9-57.3%200-79.2l-46.1-46.1c-21.9-21.9-57.3-21.9-79.2%200m-89.2%2078.9-.5.1-144.1%2043.2c-19.9%206-35.7%2021.2-42.3%2041L3.8%20445.8c-2.9%208.7-1.9%2018.2%202.5%2026l155.4-155.4c-1.1-4-1.6-8.1-1.6-12.4%200-26.5%2021.5-48%2048-48s48%2021.5%2048%2048-21.5%2048-48%2048c-4.3%200-8.5-.6-12.4-1.6L40.3%20505.7c7.8%204.4%2017.2%205.4%2026%202.5l264.3-88.6c19.7-6.6%2035-22.4%2041-42.3l43.2-144.1.1-.5L279.4%2097.2z%22/%3E%3C/svg%3E');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M40%2048c-13.3%200-24%2010.7-24%2024v48c0%2013.3%2010.7%2024%2024%2024h48c13.3%200%2024-10.7%2024-24V72c0-13.3-10.7-24-24-24zm152%2016c-17.7%200-32%2014.3-32%2032s14.3%2032%2032%2032h288c17.7%200%2032-14.3%2032-32s-14.3-32-32-32zm0%20160c-17.7%200-32%2014.3-32%2032s14.3%2032%2032%2032h288c17.7%200%2032-14.3%2032-32s-14.3-32-32-32zm0%20160c-17.7%200-32%2014.3-32%2032s14.3%2032%2032%2032h288c17.7%200%2032-14.3%2032-32s-14.3-32-32-32zM16%20232v48c0%2013.3%2010.7%2024%2024%2024h48c13.3%200%2024-10.7%2024-24v-48c0-13.3-10.7-24-24-24H40c-13.3%200-24%2010.7-24%2024m24%20136c-13.3%200-24%2010.7-24%2024v48c0%2013.3%2010.7%2024%2024%2024h48c13.3%200%2024-10.7%2024-24v-48c0-13.3-10.7-24-24-24z%22/%3E%3C/svg%3E');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20384%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M292.9%20384c7.3-22.3%2021.9-42.5%2038.4-59.9C364%20289.7%20384%20243.2%20384%20192%20384%2086%20298%200%20192%200S0%2086%200%20192c0%2051.2%2020%2097.7%2052.7%20132.1%2016.5%2017.4%2031.2%2037.6%2038.4%2059.9h201.7zm-4.9%2048H96v16c0%2044.2%2035.8%2080%2080%2080h32c44.2%200%2080-35.8%2080-80zM184%20112c-39.8%200-72%2032.2-72%2072%200%2013.3-10.7%2024-24%2024s-24-10.7-24-24c0-66.3%2053.7-120%20120-120%2013.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024%22/%3E%3C/svg%3E');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M434.8%2070.1c14.3%2010.4%2017.5%2030.4%207.1%2044.7l-256%20352c-5.5%207.6-14%2012.3-23.4%2013.1s-18.5-2.7-25.1-9.3l-128-128c-12.5-12.5-12.5-32.8%200-45.3s32.8-12.5%2045.3%200l101.5%20101.5%20234-321.7c10.4-14.3%2030.4-17.5%2044.7-7.1z%22/%3E%3C/svg%3E');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%20512a256%20256%200%201%200%200-512%20256%20256%200%201%200%200%20512m0-336c-17.7%200-32%2014.3-32%2032%200%2013.3-10.7%2024-24%2024s-24-10.7-24-24c0-44.2%2035.8-80%2080-80s80%2035.8%2080%2080c0%2047.2-36%2067.2-56%2074.5v3.8c0%2013.3-10.7%2024-24%2024s-24-10.7-24-24v-8.1c0-20.5%2014.8-35.2%2030.1-40.2%206.4-2.1%2013.2-5.5%2018.2-10.3%204.3-4.2%207.7-10%207.7-19.6%200-17.7-14.3-32-32-32zm-32%20192a32%2032%200%201%201%2064%200%2032%2032%200%201%201-64%200%22/%3E%3C/svg%3E');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%200c14.7%200%2028.2%208.1%2035.2%2021l216%20400c6.7%2012.4%206.4%2027.4-.8%2039.5S486.1%20480%20472%20480H40c-14.1%200-27.2-7.4-34.4-19.5s-7.5-27.1-.8-39.5l216-400c7-12.9%2020.5-21%2035.2-21m0%20352a32%2032%200%201%200%200%2064%2032%2032%200%201%200%200-64m0-192c-18.2%200-32.7%2015.5-31.4%2033.7l7.4%20104c.9%2012.5%2011.4%2022.3%2023.9%2022.3%2012.6%200%2023-9.7%2023.9-22.3l7.4-104c1.3-18.2-13.1-33.7-31.4-33.7z%22/%3E%3C/svg%3E');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M12%203c4.97%200%209%203.58%209%208s-6%2010-9%2010-9-5.58-9-10%204.03-8%209-8m-1.69%207.93C9.29%209.29%207.47%208.58%206.25%209.34s-1.38%202.71-.36%204.35c1.03%201.64%202.85%202.35%204.07%201.59%201.22-.78%201.37-2.71.35-4.35m3.38%200c-1.02%201.64-.87%203.57.35%204.35%201.22.76%203.04.05%204.07-1.59%201.02-1.64.86-3.59-.36-4.35s-3.04-.05-4.06%201.59M12%2017.75c-2%200-2.5-.75-2.5-.75%200%20.03.5%202%202.5%202s2.5-2%202.5-2-.5.75-2.5.75%22/%3E%3C/svg%3E');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M296%2040c0-22.1-17.9-40-40-40s-40%2017.9-40%2040c0%2044.1-53.3%2066.1-84.5%2035-15.6-15.6-40.9-15.6-56.6%200s-15.6%2040.9%200%2056.6c31.2%2031.2%209.1%2084.5-35%2084.5-22.1%200-40%2017.9-40%2040s17.9%2040%2040%2040c44.1%200%2066.1%2053.3%2035%2084.5-15.6%2015.6-15.6%2040.9%200%2056.6s40.9%2015.6%2056.6%200c31.2-31.2%2084.5-9.1%2084.5%2035%200%2022.1%2017.9%2040%2040%2040s40-17.9%2040-40c0-44.1%2053.3-66.1%2084.5-35%2015.6%2015.6%2040.9%2015.6%2056.6%200s15.6-40.9%200-56.6c-31.2-31.2-9.1-84.5%2035-84.5%2022.1%200%2040-17.9%2040-40s-17.9-40-40-40c-44.1%200-66.1-53.3-35-84.5%2015.6-15.6%2015.6-40.9%200-56.6s-40.9-15.6-56.6%200c-31.2%2031.1-84.5%209.1-84.5-35M160%20224a32%2032%200%201%201%2064%200%2032%2032%200%201%201-64%200m160%2032a32%2032%200%201%201%200%2064%2032%2032%200%201%201%200-64%22/%3E%3C/svg%3E');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20640%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M352%200c0-17.7-14.3-32-32-32s-32%2014.3-32%2032v64h-96c-53%200-96%2043-96%2096v224c0%2053%2043%2096%2096%2096h256c53%200%2096-43%2096-96V160c0-53-43-96-96-96h-96zM160%20368c0-13.3%2010.7-24%2024-24h32c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-32c-13.3%200-24-10.7-24-24m120%200c0-13.3%2010.7-24%2024-24h32c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-32c-13.3%200-24-10.7-24-24m120%200c0-13.3%2010.7-24%2024-24h32c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-32c-13.3%200-24-10.7-24-24M224%20176a48%2048%200%201%201%200%2096%2048%2048%200%201%201%200-96m144%2048a48%2048%200%201%201%2096%200%2048%2048%200%201%201-96%200m-304%200c0-17.7-14.3-32-32-32S0%20206.3%200%20224v96c0%2017.7%2014.3%2032%2032%2032s32-14.3%2032-32zm544-32c-17.7%200-32%2014.3-32%2032v96c0%2017.7%2014.3%2032%2032%2032s32-14.3%2032-32v-96c0-17.7-14.3-32-32-32%22/%3E%3C/svg%3E');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M288%200H128c-17.7%200-32%2014.3-32%2032s14.3%2032%2032%2032v151.5L7.5%20426.3C2.6%20435%200%20444.7%200%20454.7%200%20486.4%2025.6%20512%2057.3%20512h333.4c31.6%200%2057.3-25.6%2057.3-57.3%200-10-2.6-19.8-7.5-28.4L320%20215.5V64c17.7%200%2032-14.3%2032-32S337.7%200%20320%200zm-96%20215.5V64h64v151.5c0%2011.1%202.9%2022.1%208.4%2031.8L306%20320H142l41.6-72.7c5.5-9.7%208.4-20.6%208.4-31.8%22/%3E%3C/svg%3E');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20576%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M419.5%2096c-16.6%200-32.7%204.5-46.8%2012.7-15.8-16-34.2-29.4-54.5-39.5%2028.2-24%2064.1-37.2%20101.3-37.2C505.9%2032%20576%20102%20576%20188.5c0%2041.5-16.5%2081.3-45.8%20110.6l-71.1%2071.1C429.8%20399.5%20390%20416%20348.5%20416%20262.1%20416%20192%20346%20192%20259.5c0-1.5%200-3%20.1-4.5.5-17.7%2015.2-31.6%2032.9-31.1s31.6%2015.2%2031.1%2032.9v2.6c0%2051.1%2041.4%2092.5%2092.5%2092.5%2024.5%200%2048-9.7%2065.4-27.1l71.1-71.1c17.3-17.3%2027.1-40.9%2027.1-65.4%200-51.1-41.4-92.5-92.5-92.5zm-144.3%2077.3c-1.9-.8-3.8-1.9-5.5-3.1-12.6-6.5-27-10.2-42.1-10.2-24.5%200-48%209.7-65.4%2027.1l-71.1%2071.1C73.8%20275.5%2064%20299.1%2064%20323.6c0%2051.1%2041.4%2092.5%2092.5%2092.5%2016.5%200%2032.6-4.4%2046.7-12.6%2015.8%2016%2034.2%2029.4%2054.6%2039.5-28.2%2023.9-64%2037.2-101.3%2037.2C70.1%20480.2%200%20410.2%200%20323.7c0-41.5%2016.5-81.3%2045.8-110.6l71.1-71.1c29.3-29.3%2069.1-45.8%20110.6-45.8%2086.6%200%20156.5%2070.6%20156.5%20156.9v3.9c-.4%2017.7-15.1%2031.6-32.8%2031.2s-31.6-15.1-31.2-32.8v-2.3c0-33.7-18-63.3-44.8-79.6z%22/%3E%3C/svg%3E');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=LXGW+WenKai+Screen+GB+Screen:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"LXGW WenKai Screen GB Screen";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
      <link rel="stylesheet" href="../../../css/animations.css">
    
      <link rel="stylesheet" href="../../../css/flink.css">
    
      <link rel="stylesheet" href="../../../css/homepage.css">
    
      <link rel="stylesheet" href="../../../css/styles.css">
    
      <link rel="stylesheet" href="https://jsd.cdn.zzko.cn/npm/katex@0.16.4/dist/katex.min.css">
    
      <link rel="stylesheet" href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css">
    
      <link rel="stylesheet" href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css">
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#网络层" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="Starstone3's bed" class="md-header__button md-logo" aria-label="Starstone3's bed" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M480 0c14.6 0 28.8 1.6 42.5 4.7 7.4 1.7 13 7.8 13.9 15.4s-3 14.9-9.8 18.3C481.2 61 450 107.9 450 162c0 76.2 61.8 138 138 138 3.7 0 7.4-.1 11.1-.4 7.6-.6 14.7 3.6 17.8 10.6s1.5 15.1-3.9 20.4c-26 25-59.1 42.7-95.9 49.9-11.1-25.3-30.2-46.3-54.1-59.8-7.6-63.4-61.6-112.6-127.1-112.6-11.2 0-22.1 1.5-32.5 4.2-4.8-4.2-9.9-8.2-15.2-11.8-.1-2.8-.2-5.6-.2-8.4 0-106 86-192 192-192zm-.1 431.9c0 44.2-35.8 80-80 80H128c-53 0-96-43-96-96 0-47.6 34.6-87 80-94.6-.4-52.8 42.9-97.3 96-97.3 34.9 0 65.4 18.6 82.2 46.4 13-9.1 28.8-14.4 45.8-14.4 44.2 0 80 35.8 80 80 0 5.9-.6 11.7-1.9 17.2 37.4 6.7 65.8 39.4 65.8 78.7"></path></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Starstone3's bed
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第四章:网络层
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo" aria-label="关闭自动模式" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="关闭自动模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="amber" aria-label="切换至夜间模式" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换至夜间模式" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="amber" aria-label="切换至日间模式" type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="切换至日间模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/starstone3/starstone3.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 0C5.373 0 0 5.373 0 12c0 6.628 5.373 12 12 12s12-5.372 12-12c0-6.627-5.373-12-12-12m.455 2.163a9.8 9.8 0 0 1 5.789 2.222L4.384 18.244a10 10 0 0 1-1.06-1.582zm7.191 3.632a9.8 9.8 0 0 1 2.192 5.806l-14.45 9.1a10 10 0 0 1-1.592-1.055zm1.979 8.292c-.888 4.45-5.619 8.892-11.9 7.494Z"></path></svg>
  </div>
  <div class="md-source__repository">
    Starstone3 sleeps here
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../.." class="md-tabs__link">
          
  
  
    
  
  封面

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  课程笔记

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../old/" class="md-tabs__link">
          
  
  
    
  
  大一课程遗物

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../article/" class="md-tabs__link">
          
  
  
    
  
  论文阅读与课外学习

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../tools/" class="md-tabs__link">
          
  
  
    
  
  妙妙屋

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../life/" class="md-tabs__link">
          
  
  
    
  
  本科回顾

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Starstone3's bed" class="md-nav__button md-logo" aria-label="Starstone3's bed" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M480 0c14.6 0 28.8 1.6 42.5 4.7 7.4 1.7 13 7.8 13.9 15.4s-3 14.9-9.8 18.3C481.2 61 450 107.9 450 162c0 76.2 61.8 138 138 138 3.7 0 7.4-.1 11.1-.4 7.6-.6 14.7 3.6 17.8 10.6s1.5 15.1-3.9 20.4c-26 25-59.1 42.7-95.9 49.9-11.1-25.3-30.2-46.3-54.1-59.8-7.6-63.4-61.6-112.6-127.1-112.6-11.2 0-22.1 1.5-32.5 4.2-4.8-4.2-9.9-8.2-15.2-11.8-.1-2.8-.2-5.6-.2-8.4 0-106 86-192 192-192zm-.1 431.9c0 44.2-35.8 80-80 80H128c-53 0-96-43-96-96 0-47.6 34.6-87 80-94.6-.4-52.8 42.9-97.3 96-97.3 34.9 0 65.4 18.6 82.2 46.4 13-9.1 28.8-14.4 45.8-14.4 44.2 0 80 35.8 80 80 0 5.9-.6 11.7-1.9 17.2 37.4 6.7 65.8 39.4 65.8 78.7"></path></svg>

    </a>
    Starstone3's bed
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/starstone3/starstone3.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 0C5.373 0 0 5.373 0 12c0 6.628 5.373 12 12 12s12-5.372 12-12c0-6.627-5.373-12-12-12m.455 2.163a9.8 9.8 0 0 1 5.789 2.222L4.384 18.244a10 10 0 0 1-1.06-1.582zm7.191 3.632a9.8 9.8 0 0 1 2.192 5.806l-14.45 9.1a10 10 0 0 1-1.592-1.055zm1.979 8.292c-.888 4.45-5.619 8.892-11.9 7.494Z"></path></svg>
  </div>
  <div class="md-source__repository">
    Starstone3 sleeps here
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../.." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    封面
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    封面
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../friends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    友链
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    课程笔记
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    课程笔记
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ADS/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    ADS
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    ADS
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/Tree/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AVL树,Splay树,红黑树与B+树
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/amana/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    均摊分析
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/fileindex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    倒排索引
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/Leandsk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Leftist Heaps and Skew Heaps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/bioquene/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Binomial Queue
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/backtracking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    回溯
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/divide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    分治算法
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/dp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    动态规划
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/greedy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    贪心算法
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/np/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NP Completeness
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/Approximation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    近似算法
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/localsearch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    局部搜索
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/Random/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    随机化算法
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/parall/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    并发计算
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/exsort/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    外部排序
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/resource/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    课程资源
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Comcompose/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    计算机组成
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    计算机组成
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Comcompose/Ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 2:Instructions: Language of the Machine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Comcompose/Ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 3:Arithmetic for Computer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Comcompose/Ch4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 4: The Processor
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Comcompose/Ch5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 5:Cache
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Comcompose/Ch6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 6:Storage, Networks and Other Peripherals
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../db/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    数据库系统
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    数据库系统
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../db/ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1:Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../db/ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 2:关系数据模型
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../db/ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 3:SQL介绍
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../db/ch4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 4:中级SQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../db/ch5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 5:高级SQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../db/ch6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 6:ER模型
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../db/ch7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 7:关系数据库设计
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../db/ch12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 12:数据存储
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../db/ch13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 13:数据存储结构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../db/ch14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 14:索引
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../db/ch15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 15:查询处理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../db/ch16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 16:查询优化
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../db/ch17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 17:事务
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../db/ch18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 18:并发控制
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../db/ch19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 19:恢复
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../oop/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    OOP
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    OOP
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../oop/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1:Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../oop/class/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 2:类与对象
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../oop/STL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 3:STL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../oop/memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 4:Memory Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../oop/design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 5:C++设计
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../oop/copy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 6:复制构造
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../oop/template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 7:模板
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../oop/iterator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 8:迭代器
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../oop/exception/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 9:异常处理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../oop/spointer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 10:智能指针
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../oop/misc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 11:杂项
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../CA/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    计算机体系结构
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    计算机体系结构
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CA/Ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1:Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CA/Ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 2:Memory Hierarchy Design
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CA/Ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 3:Instruction-Level Parallelism
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CA/Ch4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 4:Data-Level Parallelism
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CA/Ch5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 5:Thread-Level Parallelism
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../TOC/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    计算理论
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    计算理论
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../TOC/ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch1:Sets,Relations and Language
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../TOC/ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch2:Regular Language and Automata
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../TOC/ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch3:CFL与PDA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../TOC/ch4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch4:Turing Machine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../OS/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    操作系统
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    操作系统
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OS/ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1: Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OS/ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 2:进程与线程
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OS/ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 3:进程同步
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OS/bank/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    银行家算法
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OS/ch4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 4:内存管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    计算机网络
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    计算机网络
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第一章:概述
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第二章:物理层
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第三章:数据链路层
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    第四章:网络层
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    第四章:网络层
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#异构网络互联" class="md-nav__link">
    <span class="md-ellipsis">
      
        异构网络互联
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ipv4地址" class="md-nav__link">
    <span class="md-ellipsis">
      
        IPV4地址
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IPV4地址">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#分类编址方法" class="md-nav__link">
    <span class="md-ellipsis">
      
        分类编址方法
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#划分子网编址" class="md-nav__link">
    <span class="md-ellipsis">
      
        划分子网编址
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#无分类编址cidrclassless-inter-domain-routing" class="md-nav__link">
    <span class="md-ellipsis">
      
        无分类编址CIDR(Classless Inter-Domain Routing)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#路由聚合构成超网" class="md-nav__link">
    <span class="md-ellipsis">
      
        路由聚合（构成超网）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#最长前缀匹配" class="md-nav__link">
    <span class="md-ellipsis">
      
        最长前缀匹配
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ipv4地址与mac地址" class="md-nav__link">
    <span class="md-ellipsis">
      
        IPv4地址与MAC地址
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IPv4地址与MAC地址">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#地址解析协议-arp" class="md-nav__link">
    <span class="md-ellipsis">
      
        地址解析协议 (ARP)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip数据报的发送和转发" class="md-nav__link">
    <span class="md-ellipsis">
      
        IP数据报的发送和转发
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ipv4数据报的首部格式" class="md-nav__link">
    <span class="md-ellipsis">
      
        IPv4数据报的首部格式
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#静态路由" class="md-nav__link">
    <span class="md-ellipsis">
      
        静态路由
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rip协议" class="md-nav__link">
    <span class="md-ellipsis">
      
        RIP协议
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ospf协议" class="md-nav__link">
    <span class="md-ellipsis">
      
        OSPF协议
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPF协议">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ospf区域-areas" class="md-nav__link">
    <span class="md-ellipsis">
      
        OSPF区域 (Areas)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPF区域 (Areas)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#区域类型与路由器角色" class="md-nav__link">
    <span class="md-ellipsis">
      
        区域类型与路由器角色
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#跨区域路由过程" class="md-nav__link">
    <span class="md-ellipsis">
      
        跨区域路由过程
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bgp" class="md-nav__link">
    <span class="md-ellipsis">
      
        BGP
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BGP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bgp的工作原理" class="md-nav__link">
    <span class="md-ellipsis">
      
        BGP的工作原理
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bgp的四种报文" class="md-nav__link">
    <span class="md-ellipsis">
      
        BGP的四种报文
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#路由器" class="md-nav__link">
    <span class="md-ellipsis">
      
        路由器
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="路由器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#路由器的结构" class="md-nav__link">
    <span class="md-ellipsis">
      
        路由器的结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#路由器的工作流程" class="md-nav__link">
    <span class="md-ellipsis">
      
        路由器的工作流程
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#icmp" class="md-nav__link">
    <span class="md-ellipsis">
      
        ICMP
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ICMP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#差错报告报文" class="md-nav__link">
    <span class="md-ellipsis">
      
        差错报告报文
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#icmp询问报文" class="md-nav__link">
    <span class="md-ellipsis">
      
        ICMP询问报文
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vpn" class="md-nav__link">
    <span class="md-ellipsis">
      
        VPN
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VPN">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vpn的工作原理-隧道技术" class="md-nav__link">
    <span class="md-ellipsis">
      
        VPN的工作原理 (隧道技术)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nat-网络地址转换" class="md-nav__link">
    <span class="md-ellipsis">
      
        NAT (网络地址转换)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ip多播" class="md-nav__link">
    <span class="md-ellipsis">
      
        IP多播
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IP多播">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#硬件多播" class="md-nav__link">
    <span class="md-ellipsis">
      
        硬件多播
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#在因特网中的多播" class="md-nav__link">
    <span class="md-ellipsis">
      
        在因特网中的多播
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="在因特网中的多播">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#igmp协议" class="md-nav__link">
    <span class="md-ellipsis">
      
        IGMP协议
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#多播路由选择协议" class="md-nav__link">
    <span class="md-ellipsis">
      
        多播路由选择协议
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ipv6" class="md-nav__link">
    <span class="md-ellipsis">
      
        IPV6
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IPV6">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ipv6基本首部" class="md-nav__link">
    <span class="md-ellipsis">
      
        IPv6基本首部
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ipv6扩展首部" class="md-nav__link">
    <span class="md-ellipsis">
      
        IPv6扩展首部
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#表示ipv6地址" class="md-nav__link">
    <span class="md-ellipsis">
      
        表示IPV6地址
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#常见的ipv6地址类型" class="md-nav__link">
    <span class="md-ellipsis">
      
        常见的IPv6地址类型
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#从ipv4向ipv6过渡" class="md-nav__link">
    <span class="md-ellipsis">
      
        从IPv4向IPv6过渡
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="从IPv4向IPv6过渡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#双协议栈-dual-stack" class="md-nav__link">
    <span class="md-ellipsis">
      
        双协议栈 (Dual Stack)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#隧道技术-tunneling" class="md-nav__link">
    <span class="md-ellipsis">
      
        隧道技术 (Tunneling)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ch5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第五章:运输层
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../old/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    大一课程遗物
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    大一课程遗物
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../old/fds/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    数据结构基础
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../old/digital/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    数字逻辑设计
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../old/mathandphy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    数理基础课
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../article/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    论文阅读与课外学习
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    论文阅读与课外学习
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../article/out/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    课外学习
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    课外学习
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../article/out/Transformer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Transformer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../article/out/DP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    动态规划
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../article/out/ML/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    机器学习
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../article/read/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    论文阅读
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    论文阅读
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../article/read/What%20is%20chatgpt%20doing%20and%20Why%20does%20it%20work/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    What is chatgpt doing and Why does it work
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../article/read/Instruction%20Tuning%20for%20Large%20Language%20Model%20%20A%20Survey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Instruction Tuning for Large Language Model  A Survey
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../article/read/Visual%20Instruction%20Tuning%20and%20Improved%20Baselines%20with%20Visual%20Instruction%20Tuning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Visual Instruction Tuning and Improved Baselines with Visual Instruction Tuning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../article/read/GPT-4%20Technical%20Report/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GPT 4 Technical Report
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../article/read/CogAgent%20A%20Visual%20Language%20Model%20for%20GUI%20Agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CogAgent A Visual Language Model for GUI Agents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../article/read/Knowledge%20Distillation%20A%20Survey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Knowledge Distillation: A Survey
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../tools/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    妙妙屋
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    妙妙屋
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    妙妙小工具
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/share/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    分享
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../life/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    本科回顾
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    本科回顾
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#异构网络互联" class="md-nav__link">
    <span class="md-ellipsis">
      
        异构网络互联
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ipv4地址" class="md-nav__link">
    <span class="md-ellipsis">
      
        IPV4地址
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IPV4地址">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#分类编址方法" class="md-nav__link">
    <span class="md-ellipsis">
      
        分类编址方法
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#划分子网编址" class="md-nav__link">
    <span class="md-ellipsis">
      
        划分子网编址
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#无分类编址cidrclassless-inter-domain-routing" class="md-nav__link">
    <span class="md-ellipsis">
      
        无分类编址CIDR(Classless Inter-Domain Routing)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#路由聚合构成超网" class="md-nav__link">
    <span class="md-ellipsis">
      
        路由聚合（构成超网）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#最长前缀匹配" class="md-nav__link">
    <span class="md-ellipsis">
      
        最长前缀匹配
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ipv4地址与mac地址" class="md-nav__link">
    <span class="md-ellipsis">
      
        IPv4地址与MAC地址
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IPv4地址与MAC地址">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#地址解析协议-arp" class="md-nav__link">
    <span class="md-ellipsis">
      
        地址解析协议 (ARP)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip数据报的发送和转发" class="md-nav__link">
    <span class="md-ellipsis">
      
        IP数据报的发送和转发
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ipv4数据报的首部格式" class="md-nav__link">
    <span class="md-ellipsis">
      
        IPv4数据报的首部格式
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#静态路由" class="md-nav__link">
    <span class="md-ellipsis">
      
        静态路由
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rip协议" class="md-nav__link">
    <span class="md-ellipsis">
      
        RIP协议
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ospf协议" class="md-nav__link">
    <span class="md-ellipsis">
      
        OSPF协议
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPF协议">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ospf区域-areas" class="md-nav__link">
    <span class="md-ellipsis">
      
        OSPF区域 (Areas)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPF区域 (Areas)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#区域类型与路由器角色" class="md-nav__link">
    <span class="md-ellipsis">
      
        区域类型与路由器角色
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#跨区域路由过程" class="md-nav__link">
    <span class="md-ellipsis">
      
        跨区域路由过程
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bgp" class="md-nav__link">
    <span class="md-ellipsis">
      
        BGP
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BGP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bgp的工作原理" class="md-nav__link">
    <span class="md-ellipsis">
      
        BGP的工作原理
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bgp的四种报文" class="md-nav__link">
    <span class="md-ellipsis">
      
        BGP的四种报文
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#路由器" class="md-nav__link">
    <span class="md-ellipsis">
      
        路由器
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="路由器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#路由器的结构" class="md-nav__link">
    <span class="md-ellipsis">
      
        路由器的结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#路由器的工作流程" class="md-nav__link">
    <span class="md-ellipsis">
      
        路由器的工作流程
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#icmp" class="md-nav__link">
    <span class="md-ellipsis">
      
        ICMP
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ICMP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#差错报告报文" class="md-nav__link">
    <span class="md-ellipsis">
      
        差错报告报文
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#icmp询问报文" class="md-nav__link">
    <span class="md-ellipsis">
      
        ICMP询问报文
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vpn" class="md-nav__link">
    <span class="md-ellipsis">
      
        VPN
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VPN">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vpn的工作原理-隧道技术" class="md-nav__link">
    <span class="md-ellipsis">
      
        VPN的工作原理 (隧道技术)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nat-网络地址转换" class="md-nav__link">
    <span class="md-ellipsis">
      
        NAT (网络地址转换)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ip多播" class="md-nav__link">
    <span class="md-ellipsis">
      
        IP多播
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IP多播">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#硬件多播" class="md-nav__link">
    <span class="md-ellipsis">
      
        硬件多播
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#在因特网中的多播" class="md-nav__link">
    <span class="md-ellipsis">
      
        在因特网中的多播
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="在因特网中的多播">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#igmp协议" class="md-nav__link">
    <span class="md-ellipsis">
      
        IGMP协议
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#多播路由选择协议" class="md-nav__link">
    <span class="md-ellipsis">
      
        多播路由选择协议
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ipv6" class="md-nav__link">
    <span class="md-ellipsis">
      
        IPV6
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IPV6">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ipv6基本首部" class="md-nav__link">
    <span class="md-ellipsis">
      
        IPv6基本首部
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ipv6扩展首部" class="md-nav__link">
    <span class="md-ellipsis">
      
        IPv6扩展首部
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#表示ipv6地址" class="md-nav__link">
    <span class="md-ellipsis">
      
        表示IPV6地址
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#常见的ipv6地址类型" class="md-nav__link">
    <span class="md-ellipsis">
      
        常见的IPv6地址类型
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#从ipv4向ipv6过渡" class="md-nav__link">
    <span class="md-ellipsis">
      
        从IPv4向IPv6过渡
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="从IPv4向IPv6过渡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#双协议栈-dual-stack" class="md-nav__link">
    <span class="md-ellipsis">
      
        双协议栈 (Dual Stack)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#隧道技术-tunneling" class="md-nav__link">
    <span class="md-ellipsis">
      
        隧道技术 (Tunneling)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="网络层">网络层<a class="headerlink" href="#网络层" title="Permanent link">¶</a></h1>
<div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;">
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"></path></svg></span> 约 10559 个字 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"></path></svg></span> 8 张图片 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"></path></svg></span> 预计阅读时间 53 分钟</p>
</div>
<blockquote>
<p>网络层的主要任务是将Packet从源地址经过多个网络传输到目的地址.该任务可以拆分为分组转发和路由选择两个子任务.</p>
<p>路由表存储了目的ip地址与子网掩码,下一跳路由器地址,出接口等信息,路由选择算法根据路由表选择最佳路径将数据包发送到目的地址.</p>
</blockquote>
<p>OSI模型主张在网络层建立面向连接的虚电路,依靠网络来确保可靠传输.而TCP/IP模型则主张在网络层建立无连接的分组交换网络,由用户主机来保证通信的可靠.</p>
<h2 id="异构网络互联">异构网络互联<a class="headerlink" href="#异构网络互联" title="Permanent link">¶</a></h2>
<p>网际协议(Internet Protocol,IP)是实现异构网络互联的基础协议.它定义了IP地址的格式,数据报的格式,以及路由选择等内容.IP协议是无连接的,每个数据报独立传输,不保证可靠性</p>
<p>异构网络互联的基本思想是将不同类型的网络通过路由器连接起来,形成一个统一的网络体系结构.路由器负责在不同网络之间转发数据报,并根据路由选择算法选择最佳路径.当IP网上的主机通信时,它们会感觉自己直接连接在一起,而不需要关心底层网络的差异.</p>
<hr>
<h2 id="ipv4地址">IPV4地址<a class="headerlink" href="#ipv4地址" title="Permanent link">¶</a></h2>
<blockquote>
<p>IPV4地址是每一个联网设备的唯一标识,由32位二进制数组成,通常表示为四个十进制数(0-255)用点分隔开.</p>
</blockquote>
<p>IPV4地址分为网络地址和主机地址两部分,网络地址用于标识一个网络,主机地址用于标识网络中的一台主机.子网掩码用于区分网络地址和主机地址,通过与运算可以得到网络地址.</p>
<h3 id="分类编址方法">分类编址方法<a class="headerlink" href="#分类编址方法" title="Permanent link">¶</a></h3>
<p>IPV4地址根据网络规模分为A,B,C,D,E五类:</p>
<ul>
<li>
<p>A类地址: 网络号占8位,主机号占24位,适用于大型网络.范围: 1.0.0.0 - 126.255.255.254</p>
</li>
<li>
<p>B类地址: 网络号占16位,主机号占16位,适用于中型网络.范围: 128.0.0.0 - 191.255.255.254</p>
</li>
<li>
<p>C类地址: 网络号占24位,主机号占8位,适用于小型网络.范围: 192.0.0.0 - 223.255.255.254</p>
</li>
<li>
<p>D类地址: 用于多播通信.范围: 224.0.0.0 - 239.255.255.255</p>
</li>
<li>
<p>E类地址: 保留地址,用于实验和研究.范围: 240.0.0.0 - 255.255.255.255</p>
</li>
</ul>
<p>注意:</p>
<ul>
<li>主机号全0表示网络地址,主机号全1表示广播地址,不能分配给主机使用.</li>
</ul>
<div style="text-align: center;">
    <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../../../image/mac191.png" data-desc-position="bottom"><img src="../../../image/mac191.png" width="80%"></a>
    <br>
    特殊的IPV4地址
</div>

<hr>
<h3 id="划分子网编址">划分子网编址<a class="headerlink" href="#划分子网编址" title="Permanent link">¶</a></h3>
<p>分类编址的IPV4地址容易造成浪费,例如,一个子网中有100000台设备,此时采用A类地址,还剩下许多地址可以使用,但是别的子网就不不能用了.</p>
<p>因此我们希望从主机号中借用一些位作为网络号,这样就可以划分更多的子网,提高地址利用率.这种方法称为子网划分(Subnetting).</p>
<p>我们使用子网掩码来表示子网划分的情况.子网掩码也是一个32位的二进制数,与IPV4地址进行与运算,得到网络地址.</p>
<p>子网划分将原来的两级IP地址（网络号、主机号）转变为三级IP地址（网络号、子网号、主机号）。子网号是从原来的主机号部分借位而来的。</p>
<div style="text-align: center;">
    <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../../../image/mac192.png" data-desc-position="bottom"><img src="../../../image/mac192.png" width="80%"></a>
    <br>
    IP地址结构
</div>

<p>子网掩码由一连串的1和一连串的0组成，其中1对应IP地址中的网络号和子网号，0对应主机号。</p>
<div class="admonition example">
<p class="admonition-title">子网划分示例</p>
<p>假设有一个B类网络 <code>145.13.0.0</code>，其默认子网掩码为 <code>255.255.0.0</code>。现在需要将其划分为多个子网，每个子网最多容纳约500台主机。</p>
<ol>
<li>
<p><strong>确定主机位数</strong>：
    为了容纳500台主机，我们需要确定主机号所需的位数 <code>n</code>。
    $$ 2^n - 2 \ge 500 $$
    计算可知，<span class="arithmatex">\(2^9 - 2 = 510\)</span>，满足条件。因此，主机号需要9位。</p>
</li>
<li>
<p><strong>确定子网位数</strong>：
    B类地址的主机号部分有16位。借走一部分给子网号后，还剩9位给主机号。
    因此，子网号的位数为：<span class="arithmatex">\(16 - 9 = 7\)</span> 位。</p>
</li>
<li>
<p><strong>计算子网掩码</strong>：
    新的子网掩码在默认B类掩码的基础上，将原主机号部分的前7位置为1。</p>
<ul>
<li>
<p>默认B类掩码：<code>11111111.11111111.00000000.00000000</code></p>
</li>
<li>
<p>新的子网掩码：<code>11111111.11111111.11111110.00000000</code></p>
</li>
<li>
<p>转换为十进制：<code>255.255.254.0</code></p>
</li>
</ul>
</li>
<li>
<p><strong>计算子网数量</strong>：
    子网号有7位，因此可以划分出 <span class="arithmatex">\(2^7 = 128\)</span> 个子网。</p>
</li>
</ol>
<p>通过这种方式，原有的一个B类网络被成功地划分成了128个更小的子网，每个子网可以容纳510台主机，极大地提高了IP地址的利用率。</p>
</div>
<h3 id="无分类编址cidrclassless-inter-domain-routing">无分类编址CIDR(Classless Inter-Domain Routing)<a class="headerlink" href="#无分类编址cidrclassless-inter-domain-routing" title="Permanent link">¶</a></h3>
<p>随着互联网的发展，分类编址的局限性愈发明显，即使有子网划分，地址浪费和路由表庞大的问题依然存在。为此，IETF提出了<strong>无分类域间路由（CIDR）</strong>。</p>
<p>CIDR消除了传统的A、B、C类地址和子网划分的概念，将32位的IP地址划分为两部分：<strong>网络前缀</strong>和<strong>主机号</strong>.</p>
<div class="arithmatex">\[ \text{IP地址} ::= \{&lt;\text{网络前缀}&gt;, &lt;\text{主机号}&gt;\} \]</div>
<p>CIDR采用<strong>斜线记法</strong>，在IP地址后面加上<code>/</code>和网络前缀的位数。例如，<code>128.14.32.8/20</code>表示该IP地址的前20位是网络前缀，后12位是主机号。</p>
<p><strong>CIDR地址块</strong>：CIDR将网络前缀相同的连续IP地址组成一个“CIDR地址块”. 我们可以根据地址块的起始地址和网络前缀长度，计算出地址块的范围：</p>
<ul>
<li><strong>地址块中的地址数</strong>：<span class="arithmatex">\(2^{32 - \text{网络前缀长度}}\)</span></li>
<li><strong>最小地址</strong>：网络前缀部分不变，主机号部分全为0。</li>
<li><strong>最大地址</strong>：网络前缀部分不变，主机号部分全为1。</li>
</ul>
<div class="admonition example">
<p class="admonition-title">CIDR地址块计算</p>
<p>对于地址块 <code>128.14.32.0/20</code>：</p>
<ul>
<li><strong>地址数</strong>：<span class="arithmatex">\(2^{32-20} = 2^{12} = 4096\)</span> 个地址。</li>
<li><strong>子网掩码</strong>：前20位为1，后12位为0，即 <code>255.255.240.0</code>。</li>
<li><strong>最小地址</strong>：<code>128.14.32.0</code></li>
<li><strong>最大地址</strong>：<code>128.14.47.255</code></li>
</ul>
<p>因此，该地址块的范围是 <code>128.14.32.0</code> 到 <code>128.14.47.255</code>。</p>
</div>
<p>无分类编址相比于之前,最大的进步就是更加灵活了,不需要固定8,16或者24位作为网络号,可以根据实际需求划分任意长度的网络前缀.形成自定义大小的子网.</p>
<h3 id="路由聚合构成超网">路由聚合（构成超网）<a class="headerlink" href="#路由聚合构成超网" title="Permanent link">¶</a></h3>
<p>CIDR的一个核心优势是<strong>路由聚合</strong>，它允许将多个连续的CIDR地址块合并成一个更大的地址块，从而在路由表中用一个条目来表示多个网络。这个过程也称为<strong>构成超网（Supernetting）</strong>。</p>
<p>例如，一个ISP拥有<code>206.0.68.0/22</code>到<code>206.0.71.0/22</code>这4个地址块。它可以向外界宣告它拥有一个更大的地址块<code>206.0.68.0/20</code>，这样外部路由器只需要一条路由记录就能找到这个ISP下的所有主机。</p>
<p>路由聚合极大地减少了路由表的规模，减轻了路由器的负担，提高了互联网的整体性能。</p>
<div style="text-align: center;">
    <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../../../image/mac197.png" data-desc-position="bottom"><img src="../../../image/mac197.png" width="80%"></a>
    <br>
    路由聚合示例
</div>

<p>要找到聚合后的共同前缀，只需对所有地址进行“按位与”运算。</p>
<h3 id="最长前缀匹配">最长前缀匹配<a class="headerlink" href="#最长前缀匹配" title="Permanent link">¶</a></h3>
<p>由于路由聚合的存在，路由表中可能会出现多个匹配目的IP地址的条目。例如，一个路由器中可能有：</p>
<ul>
<li><code>206.0.68.0/20</code> -&gt; 路由器R1</li>
<li><code>206.0.70.0/22</code> -&gt; 路由器R2</li>
</ul>
<p>当一个目的地址为<code>206.0.70.130</code>的数据包到达时，两个条目都能匹配。此时，路由器会采用<strong>最长前缀匹配</strong>原则，选择网络前缀最长的那个条目进行转发。在这个例子中，<code>/22</code>比<code>/20</code>更长，因此数据包会被转发给路由器R2。</p>
<hr>
<hr>
<h2 id="ipv4地址与mac地址">IPv4地址与MAC地址<a class="headerlink" href="#ipv4地址与mac地址" title="Permanent link">¶</a></h2>
<p>数据链路层将IP数据报封装为帧进行传输,而帧的发送和接收是通过MAC地址来实现的.因此,在同一局域网内,需要将IP地址转换为对应的MAC地址.</p>
<p>在帧的传输过程中,源IP地址和目的IP地址保持不变,但源MAC地址和目的MAC地址会根据每一跳的链路进行更新.每个路由器在转发数据包时,会将目的MAC地址设置为下一跳路由器的MAC地址.</p>
<p>然而,在同一局域网内,主机需要知道目的IP地址对应的MAC地址,以便正确发送帧.为此,引入了地址解析协议(ARP).</p>
<h3 id="地址解析协议-arp">地址解析协议 (ARP)<a class="headerlink" href="#地址解析协议-arp" title="Permanent link">¶</a></h3>
<p>地址解析协议（ARP, Address Resolution Protocol）的作用是在局域网中，根据一个已知的IP地址，找出其对应的MAC地址。</p>
<p>每台主机或路由器都有一个<strong>ARP缓存表（ARP Cache）</strong>，用于存储本局域网内各主机和路由器的IP地址与MAC地址的对应关系。</p>
<p><strong>工作流程如下：</strong></p>
<ol>
<li>
<p><strong>检查ARP缓存</strong>：
    当主机A想给本局域网内的主机B发送IP数据报时，它会首先在自己的ARP缓存表中查找是否有主机B的IP地址对应的条目。</p>
<ul>
<li>
<p><strong>如果找到</strong>：就直接从缓存中读取主机B的MAC地址，并用该MAC地址作为目的地址来封装数据帧，然后发送。</p>
</li>
<li>
<p><strong>如果未找到</strong>：则进入下一步。</p>
</li>
</ul>
</li>
<li>
<p><strong>发送ARP请求</strong>：
    主机A会在本局域网内以<strong>广播</strong>的形式发送一个<strong>ARP请求分组</strong>。该请求分组的主要内容是：“我的IP地址是<code>IP_A</code>，我的MAC地址是<code>MAC_A</code>。我想知道IP地址为<code>IP_B</code>的主机的MAC地址是什么？”</p>
</li>
<li>
<p><strong>目标主机响应</strong>：
    局域网内的所有主机都会收到这个广播的ARP请求。</p>
<ul>
<li>
<p>其他主机发现请求的IP地址不是自己，就会忽略该请求。当然,也可以在这时将A的IP和MAC地址存入自己的ARP缓存表中,以备后用.</p>
</li>
<li>
<p>主机B发现请求的IP地址与自己的IP地址相匹配，它就会向主机A发送一个<strong>ARP响应分组</strong>。这个响应是<strong>单播</strong>的，直接发送给主机A。响应分组的内容是：“我的IP地址是<code>IP_B</code>，我的MAC地址是<code>MAC_B</code>。”</p>
</li>
</ul>
</li>
<li>
<p><strong>更新缓存并发送数据</strong>：</p>
<p>主机A收到主机B的ARP响应后，就知道了主机B的MAC地址。它会将这个IP到MAC的映射关系存入自己的ARP缓存表中（通常会设置一个生存时间，如20分钟），然后用这个MAC地址来封装数据帧并发送给主机B。</p>
</li>
</ol>
<h3 id="ip数据报的发送和转发">IP数据报的发送和转发<a class="headerlink" href="#ip数据报的发送和转发" title="Permanent link">¶</a></h3>
<p>如果一个主机A向另一个主机B发送数据报,首先需要判断主机B是否在同一局域网内.</p>
<ul>
<li>查看子网掩码,将主机A的IP地址和主机B的IP地址分别与子网掩码进行与运算,如果结果相同,则说明两台主机在同一局域网内.</li>
</ul>
<p>如果不在同一局域网内,主机A需要将数据报发送给默认网关(路由器).此时,主机A需要知道默认网关的MAC地址,通过ARP协议获取.</p>
<p>默认网关在收到数据报后,首先检查收到的IP报是否正确,然后根据路由表选择下一跳路由器,将数据报封装在新的帧中发送出去.在这个过程中,路由器会更新帧的源MAC地址和目的MAC地址,但IP报的源IP地址和目的IP地址保持不变.</p>
<h3 id="ipv4数据报的首部格式">IPv4数据报的首部格式<a class="headerlink" href="#ipv4数据报的首部格式" title="Permanent link">¶</a></h3>
<div style="text-align: center;">
    <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../../../image/mac198.png" data-desc-position="bottom"><img src="../../../image/mac198.png" width="80%"></a>
    <br>
    IPv4数据报首部格式
</div>

<ul>
<li>
<p>固定部分(20字节):</p>
<ul>
<li>
<p>版本(Version): 4位,表示IP协议的版本号,IPv4为4.</p>
</li>
<li>
<p>首部长度(IHL): 4位,表示IP数据报首部的长度,单位为32位(4字节).比如,如果首部长度为5,则表示首部长度为20字节(仅包含固定部分).</p>
</li>
<li>
<p>服务类型(Type of Service): 8位,用于指示数据报的优先级和服务质量要求.</p>
</li>
<li>
<p>总长度(Total Length): 16位,表示整个IP数据报的长度,单位为字节.</p>
</li>
<li>
<p>标识(Identification): 16位,用于唯一标识一个IP数据报,在分片时使用.</p>
</li>
<li>
<p>标志(Flags): 3位,用于控制和标识分片.</p>
</li>
<li>
<p>片偏移(Fragment Offset): 13位,表示分片在原始数据报中的位置.</p>
</li>
<li>生存时间(Time to Live, TTL): 8位,用于防止数据报在网络中无限循环.</li>
<li>协议(Protocol): 8位,表示上层协议类型,如TCP为6,UDP为17.</li>
<li>首部校验和(Header Checksum): 16位,用于检测IP数据报首部在传输过程中是否出错.</li>
<li>源IP地址(Source IP Address): 32位,表示发送方的IP地址.</li>
<li>目的IP地址(Destination IP Address): 32位,表示接收方的IP地址.</li>
</ul>
</li>
<li>
<p>可选部分(0-40字节): 可选字段,用于扩展IP数据报的功能,如安全选项、时间戳等.</p>
</li>
<li>
<p>填充部分: 用0填充首部,使其长度为32位(四字节)的整数倍.</p>
</li>
</ul>
<div class="admonition definition">
<p class="admonition-title">IPV4的分片</p>
<p>我们知道,帧的数据载荷长度是有限制的,不同类型的链路有不同的最大传输单元(MTU,Maximum Transmission Unit).当IP数据报的长度超过链路的MTU时,就需要进行分片(Fragmentation).这就用到了IP数据报首部中的标识、标志和片偏移字段.</p>
<ul>
<li>
<p>标识:属于同一个IPv4数据报的各分片数据报应该具有相同的标识。</p>
</li>
<li>
<p>标志:三位的作用分别是</p>
<ul>
<li>
<p>第1位: 保留位,必须为0.</p>
</li>
<li>
<p>第2位: 不分片位(DF, Don't Fragment),如果设置为1,表示该数据报不能被分片.</p>
</li>
<li>
<p>第3位: 更多分片位(MF, More Fragments),如果设置为1,表示后面还有分片;如果为0,表示这是最后一个分片.</p>
</li>
</ul>
</li>
<li>
<p>片偏移:表示该分片在原始数据报中的位置,单位为8字节(64位).例如,如果一个分片的片偏移为100,则表示该分片在原始数据报中的位置是第800字节(100*8).</p>
</li>
</ul>
<p></p><div style="text-align: center;">
    <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../../../image/mac199.png" data-desc-position="bottom"><img src="../../../image/mac199.png" width="80%"></a>
    <br>
    IPV4分片示例
</div><p></p>
</div>
<div class="admonition definition">
<p class="admonition-title">首部校验和</p>
<p>发送端端计算方法为:</p>
<ol>
<li>
<p>将首部看作一系列16位的字(Word),如果首部长度不是16位的整数倍,则在末尾补0.</p>
</li>
<li>
<p>将原来的校验和字段设为0.</p>
</li>
<li>
<p>将所有16位字相加,如果在加法过程中产生了最高位（第 16 位）的进位（Carry）,则将该进位加到结果的最低位（第 1 位）上.</p>
</li>
<li>
<p>对结果取反,得到校验和.</p>
</li>
</ol>
<p>而接受方在接收到数据报后,也会按照相同的方法计算校验和,如果结果全为1,则表示数据报首部没有错误;否则,表示数据报首部在传输过程中发生了错误,需要丢弃该数据报.</p>
<p>原理是<span class="arithmatex">\(A + \bar{A} = -1\)</span>.</p>
</div>
<h3 id="静态路由">静态路由<a class="headerlink" href="#静态路由" title="Permanent link">¶</a></h3>
<blockquote>
<p>静态路由是手动添加的路由条目,通常用于小型网络或特定的路由需求.管理员需要手动配置每个路由器的路由表,指定目的地址、子网掩码、下一跳地址和出接口等信息.</p>
</blockquote>
<p>默认路由是一种特殊的静态路由,用于处理那些目的地址不在路由表中的数据报.默认路由通常指向一个网关(路由器),当路由器无法在路由表中找到匹配的条目时,就会将数据报发送到默认路由指定的网关.</p>
<p>为了在最长前缀匹配规则下,最后使用默认路由,默认路由的网络前缀长度为0,表示匹配所有目的地址,也即<code>0.0.0.0/0</code></p>
<p>特定主机路由是另一种静态路由,用于指定某个特定主机的路由路径.这种路由条目的网络前缀长度为32,表示只匹配该主机的IP地址.</p>
<hr>
<h2 id="rip协议">RIP协议<a class="headerlink" href="#rip协议" title="Permanent link">¶</a></h2>
<p>路由信息协议(Routing Information Protocol,RIP)是一种基于距离矢量算法的动态路由协议.</p>
<p>该协议要求每一个路由器维护一个路由表,记录到达各个目的网络的距离(跳数)和下一跳路由器地址.路由器通过定期和相邻路由器交换路由信息来更新路由表.</p>
<p>路由器到直连网络的距离为1,到其他网络的距离为经过的路由器数量.超过15跳的网络被认为是不可达的.</p>
<p>RIP协议的一个重要特点是: <strong>好消息传播得快,坏消息传播得慢</strong>.</p>
<ol>
<li>
<p>好消息传播得快</p>
<p>当网络中出现新的路由或路径变短时,这种更新信息会迅速传播到整个网络.</p>
<div class="admonition example">
<p class="admonition-title">示例: 好消息传播得快</p>
<p>假设网络拓扑为 <strong>N --- R1 --- R2</strong>。初始状态下，R1 到 N 的距离为 4，R2 到 N 的距离为 5（经过 R1）。</p>
<p>某时刻 R1 的某个端口检测到“到N更短的链路”(距离由4变为1).</p>
<ol>
<li>
<p>R1 计算其到N的最新距离:
    $$ \text{dist} = \min{(1, 1 + \text{dist}(R2 \to N))} = \min{(1, 1+5)} = 1 $$
    R1 更新路由表并通知邻居.</p>
</li>
<li>
<p>R2 收到通知后, 更新其到N的距离为2, 并通知邻居.</p>
</li>
<li>
<p>R1 收到通知后, 发现距离未变, 不再发送通知.</p>
</li>
</ol>
<p>算法进入静止状态. 可见, R2到N的距离减少的好消息通过RIP得到了迅速传播.</p>
</div>
</li>
<li>
<p>坏消息传播得慢(路由环路问题)</p>
<p>当网络中出现故障(如链路断开)时, 这种"坏消息"往往需要很长时间才能传播开来,甚至导致<strong>路由环路(Routing Loop)</strong>.</p>
<div class="admonition example">
<p class="admonition-title">示例: 坏消息传播得慢</p>
<p>同样假设初始状态下 R1 到 N 的距离为 4，R2 到 N 的距离为 5。</p>
<p>某时刻 R1 的某个端口检测到“N不可达”(距离变为16).</p>
<ol>
<li>
<p>R1 计算其到N的最新距离:
    $$ \text{dist} = \min{(16, 1 + \text{dist}(R2 \to N))} = \min{(16, 1+5)} = 6 $$
    <strong>注意</strong>: 从网络全局视角看, 经过R2的这个新距离显然是错误的(因为R2到N其实也要经过R1).
    R1 更新路由表并通知邻居.</p>
</li>
<li>
<p>R2 收到通知后, 更新其到N的距离为7, 并通知邻居.</p>
</li>
<li>
<p>R1 收到通知后, 重新计算距离:
    $$ \text{dist} = \min{(16, 1 + 7)} = 8 $$
    R1 继续通知邻居...</p>
</li>
</ol>
<p>如此循环, 直到R2最终算出它经由R1到达N的距离为16为止. 可见, RIP关于链路故障或距离增加的坏消息传播得很慢.</p>
</div>
</li>
</ol>
<p>为了解决这个问题, RIP采取了一些措施:</p>
<ol>
<li>
<p><strong>水平分割(Split Horizon)</strong>:</p>
<ul>
<li>
<p><strong>原理</strong>: 路由器从某个接口学到的路由信息, 不会再通过该接口发回给邻居.</p>
</li>
<li>
<p><strong>作用</strong>: 避免了将过时的信息发回给信息的来源, 从而减少环路产生的可能性.</p>
</li>
</ul>
</li>
<li>
<p><strong>毒性逆转(Poison Reverse)</strong>:</p>
<ul>
<li>
<p><strong>原理</strong>: 路由器从某个接口学到的路由信息, 会将该路由的度量值设为16(不可达), 然后发回给邻居.</p>
</li>
<li>
<p><strong>作用</strong>: 明确告知邻居这条路径已经不可达(或者说通过我到达该网络是不可行的), 从而消除环路.</p>
</li>
</ul>
</li>
<li>
<p><strong>触发更新(Triggered Update)</strong>:</p>
<ul>
<li>
<p><strong>原理</strong>: 一旦检测到路由表发生变化, 立即发送更新报文, 而不是等待30秒的周期性更新.</p>
</li>
<li>
<p><strong>作用</strong>: 加快收敛速度, 减少坏消息传播慢带来的影响.</p>
</li>
</ul>
</li>
</ol>
<hr>
<h2 id="ospf协议">OSPF协议<a class="headerlink" href="#ospf协议" title="Permanent link">¶</a></h2>
<blockquote>
<p>OSPF(Open Shortest Path First)是一种基于链路状态算法的动态路由协议.</p>
</blockquote>
<div class="admonition definition">
<p class="admonition-title">相关状态</p>
<ol>
<li>
<p>链路状态(Link State): 说明本路由器都和哪些路由器相邻,以及该链路的"度量"(metric). OSPF将链路的度量理解为费用,距离,时延,带宽等.</p>
</li>
<li>
<p>问候分组(Hello Packet): 路由器周期性发送问候分组,以便发现和维持邻居关系.问候分组封装在IP数据报中,IP数据报的协议号为89.</p>
<ul>
<li>
<p>问候分组发送的周期为10s</p>
</li>
<li>
<p>若40s未收到邻居路由器的问候分组,则认为邻居路由器不可达</p>
</li>
</ul>
</li>
<li>
<p>链路状态通告(Link State Advertisement):每个路由器会产生自己的链路状态通告(LSA),并通过洪泛(Flooding)的方式将其发送给所有其他路由器. LSA包含直连链路的信息,如邻居路由器的ID,链路的度量等与直连网络的信息.</p>
</li>
<li>
<p>链路状态更新(Link State Update): LSA被封装在链路状态更新分组(LSU)中, 采用<strong>洪泛法(Flooding)</strong>进行发送.</p>
<ul>
<li>
<p><strong>洪泛法</strong>: 路由器向自己所有的邻居路由器发送LSU, 收到该分组的各路由器又将该分组转发给自己所有的邻居路由器(但其上游路由器除外), 以此类推.</p>
</li>
<li>
<p><strong>可靠性</strong>: 收到LSU后要发送确认. 收到重复的更新分组无需再次转发, 但要发送一次确认.</p>
</li>
</ul>
</li>
<li>
<p>链路状态数据库(LSDB): 路由器将收到的链路状态信息存储在LSDB中,最终全网所有路由器的LSDB是一致的.</p>
</li>
</ol>
</div>
<p>在完成LSDB的构建后, OSPF会根据Dijkstra算法计算出最优路径,并更新路由表.路径的度量是链路状态的度量之和.</p>
<h3 id="ospf区域-areas">OSPF区域 (Areas)<a class="headerlink" href="#ospf区域-areas" title="Permanent link">¶</a></h3>
<p>为了使OSPF能用于规模很大的网络, 将一个自治系统(AS)再划分为若干更小的范围, 称为<strong>区域(Area)</strong>.</p>
<ul>
<li><strong>划分区域的好处</strong>: 把利用洪泛法交换链路状态信息的范围局限在各个区域, 而不是整个AS, 从而减少了整个网络上的通信量.</li>
</ul>
<h4 id="区域类型与路由器角色">区域类型与路由器角色<a class="headerlink" href="#区域类型与路由器角色" title="Permanent link">¶</a></h4>
<div style="text-align: center;">
    <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../../../image/mac204.png" data-desc-position="bottom"><img src="../../../image/mac204.png" width="80%"></a>
    <br>
    区域示例
</div>

<ol>
<li>
<p><strong>主干区域 (Backbone Area)</strong>:</p>
<ul>
<li>
<p>在AS内只有一个区域配置成主干区域.</p>
</li>
<li>
<p>作用是连通其他区域.</p>
</li>
<li>
<p>包含AS内的所有<strong>区域边界路由器(ABR)</strong>, 可能还包含一些非边界路由器.</p>
</li>
</ul>
</li>
<li>
<p><strong>区域边界路由器 (Area Border Router, ABR)</strong>:</p>
<ul>
<li>
<p>负责为流向该区域以外的分组提供路由选择.</p>
</li>
<li>
<p>连接主干区域和其他区域的路由器 (如图中的 R3, R4, R7).</p>
</li>
<li>
<p>每个区域至少有一个区域边界路由器.</p>
</li>
</ul>
</li>
<li>
<p><strong>自治系统边界路由器 (AS Boundary Router, ASBR)</strong>:</p>
<ul>
<li>主干区域中专门负责和本AS外的其他AS交换路由信息的路由器 (如图中的R6).</li>
</ul>
</li>
</ol>
<h4 id="跨区域路由过程">跨区域路由过程<a class="headerlink" href="#跨区域路由过程" title="Permanent link">¶</a></h4>
<p>当分组在AS内的不同区域之间传送时:</p>
<ol>
<li>
<p>先找到本区域内的一个<strong>区域边界路由器</strong> (如 R3, R4, R7).</p>
</li>
<li>
<p>再通过<strong>主干区域</strong>路由到位于目的区域的区域边界路由器.</p>
</li>
<li>
<p>最后路由到目的地.</p>
</li>
</ol>
<hr>
<h2 id="bgp">BGP<a class="headerlink" href="#bgp" title="Permanent link">¶</a></h2>
<blockquote>
<p>BGP(Border Gateway Protocol)是一种外部网关协议(EGP), 用于在自治系统(AS)之间交换路由信息.</p>
<p>上面介绍的RIP和OSPF都是内部网关协议(IGP), 用于在自治系统(AS)内部交换路由信息.</p>
</blockquote>
<p>由于不同AS里度量路由的标准不同,使用统一的代价来作为度量寻找路径是不可行的.</p>
<p>因此,BGP协议的追求并不是找到最短的路径,而是在考虑相关策略(政治、经济、安全)后,找到一条比较好的路由.</p>
<h3 id="bgp的工作原理">BGP的工作原理<a class="headerlink" href="#bgp的工作原理" title="Permanent link">¶</a></h3>
<ol>
<li>
<p><strong>BGP发言人 (BGP Speaker)</strong>:</p>
<ul>
<li>
<p>每个自治系统至少选择一个路由器作为"BGP发言人".</p>
</li>
<li>
<p>BGP发言人之间建立 <strong>TCP连接</strong> (端口号179) 交换路由信息.</p>
</li>
</ul>
</li>
<li>
<p><strong>路径矢量算法 (Path Vector)</strong>:</p>
<ul>
<li>
<p>BGP不使用距离矢量, 而是使用 <strong>AS路径 (AS-PATH)</strong>.</p>
</li>
<li>
<p>AS-PATH 记录了路由经过的所有自治系统序列.</p>
</li>
<li>
<p><strong>防环机制</strong>: 如果路由器在收到的路由信息的 AS-PATH 中发现了自己的 AS号, 则丢弃该路由, 从而有效避免了环路.</p>
</li>
</ul>
</li>
</ol>
<h3 id="bgp的四种报文">BGP的四种报文<a class="headerlink" href="#bgp的四种报文" title="Permanent link">¶</a></h3>
<p>BGP通过TCP连接交换以下四种报文:</p>
<ol>
<li>
<p><strong>OPEN (打开) 报文</strong>:</p>
<ul>
<li>用于与相邻的BGP发言人建立关系.</li>
</ul>
</li>
<li>
<p><strong>UPDATE (更新) 报文</strong>:</p>
<ul>
<li>BGP的核心报文.</li>
<li>用于通告新路由或撤销不可达路由.</li>
</ul>
</li>
<li>
<p><strong>KEEPALIVE (保活) 报文</strong>:</p>
<ul>
<li>
<p>周期性发送, 用于维持邻居关系 (心跳机制).</p>
</li>
<li>
<p>也用于对 OPEN 报文的确认.</p>
</li>
</ul>
</li>
<li>
<p><strong>NOTIFICATION (通知) 报文</strong>:</p>
<ul>
<li>用于报告错误, 发送后会关闭连接.</li>
</ul>
</li>
</ol>
<hr>
<h2 id="路由器">路由器<a class="headerlink" href="#路由器" title="Permanent link">¶</a></h2>
<blockquote>
<p>路由器的任务是根据路由表选择最佳路径转发数据包.</p>
</blockquote>
<h3 id="路由器的结构">路由器的结构<a class="headerlink" href="#路由器的结构" title="Permanent link">¶</a></h3>
<p>路由器主要由<strong>路由选择部分(控制层面)</strong>和<strong>分组转发部分(数据层面)</strong>组成.</p>
<ol>
<li>
<p><strong>路由选择部分 (控制层面)</strong>:</p>
<ul>
<li>核心是<strong>路由选择处理机</strong>.</li>
<li>负责运行路由选择协议(RIP, OSPF, BGP等), 计算路由, 维护<strong>路由表</strong>.</li>
<li>定期与相邻路由器交换路由信息.</li>
</ul>
</li>
<li>
<p><strong>分组转发部分 (数据层面)</strong>:</p>
<ul>
<li>负责将数据包从输入端口转发到合适的输出端口.</li>
<li>主要包含三部分:<ul>
<li><strong>输入端口</strong>: 物理层接收 -&gt; 数据链路层解封装 -&gt; <strong>查找转发表</strong>(根据目的IP地址).</li>
<li><strong>交换结构 (Switching Fabric)</strong>: 将分组从输入端口交换到输出端口. 常见的交换方式有: 通过存储器, 通过总线, 通过纵横交换阵列(Crossbar).</li>
<li><strong>输出端口</strong>: 缓存分组 -&gt; 数据链路层封装 -&gt; 物理层发送.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="路由器的工作流程">路由器的工作流程<a class="headerlink" href="#路由器的工作流程" title="Permanent link">¶</a></h3>
<p>当一个IP数据报到达路由器时:</p>
<ol>
<li>
<p><strong>接收与解封装</strong>: 输入端口的物理层接收信号, 数据链路层剥去帧首部和尾部.</p>
</li>
<li>
<p><strong>查找转发表</strong>: 根据IP首部中的<strong>目的IP地址</strong>, 在<strong>转发表</strong>中进行<strong>最长前缀匹配</strong>, 确定下一跳路由器的IP地址和出接口.</p>
</li>
<li>
<p><strong>首部更新</strong>:</p>
<ul>
<li>
<p><strong>TTL减1</strong>: 如果TTL变为0, 则丢弃该分组并向源主机发送ICMP超时报文.</p>
</li>
<li>
<p><strong>重新计算校验和</strong>: 因为TTL变了, 首部校验和也需要重新计算.</p>
</li>
</ul>
</li>
<li>
<p><strong>交换与排队</strong>: 通过交换结构将分组传送到对应的输出端口. 如果输出端口繁忙, 分组需要在队列中等待(可能发生丢包).</p>
</li>
<li>
<p><strong>封装与发送</strong>: 输出端口将IP数据报封装成新的帧(源MAC是本端口, 目的MAC是下一跳), 发送到下一跳.</p>
</li>
</ol>
<hr>
<h2 id="icmp">ICMP<a class="headerlink" href="#icmp" title="Permanent link">¶</a></h2>
<blockquote>
<p>ICMP(Internet Control Message Protocol)是IP协议的控制报文, 用于报告错误或提供信息.</p>
</blockquote>
<p>ICMP报文是IP数据报的负载, 因此ICMP报文的IP首部中的协议号为1.</p>
<p>ICMP报文分为两类:</p>
<ol>
<li>
<p><strong>差错报告报文</strong>:</p>
<ul>
<li>用于报告错误, 发送后会关闭连接.</li>
</ul>
</li>
<li>
<p><strong>询问报文</strong>:</p>
<ul>
<li>用于提供信息, 发送后不会关闭连接.</li>
</ul>
</li>
</ol>
<h3 id="差错报告报文">差错报告报文<a class="headerlink" href="#差错报告报文" title="Permanent link">¶</a></h3>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>常见的差错报告报文有五种</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:5"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><input id="__tabbed_1_3" name="__tabbed_1" type="radio"><input id="__tabbed_1_4" name="__tabbed_1" type="radio"><input id="__tabbed_1_5" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">终点不可达</label><label for="__tabbed_1_2">源点抑制</label><label for="__tabbed_1_3">时间超过</label><label for="__tabbed_1_4">参数问题</label><label for="__tabbed_1_5">改变路由(重定向)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>当路由器或主机不能交付数据报时就向源点发送终点不可达报文.具体可再根据ICMP的代码字段细分为目的网络不可达、目的主机不可达、目的协议不可达、目的端口不可达、目的网络未知、目的主机未知等13种</p>
</div>
<div class="tabbed-block">
<p>当路由器或主机由于拥塞而丢弃数据报时,就向源点发送源点抑制报文,让源点把发送速率放慢.</p>
</div>
<div class="tabbed-block">
<p>当路由器收到一个目的IP地址不是自己的IP数据报,会将其生存时间TTL减1. 若结果为0,则丢弃该数据报,并向源点发送时间超过报文. </p>
<p>另外,当终点在预先规定的时间内不能收到一个数据报的全部数据报片时,就把已收到的数据报片都丢弃,并向源点发送时间超过报文.</p>
</div>
<div class="tabbed-block">
<p>当路由器或目的主机收到的IP数据报的首部中有的字段的值不正确时,就丢弃该数据报,并向源点发送参数问题报文.</p>
</div>
<div class="tabbed-block">
<p>路由器把改变路由报文发送给主机,让主机知道下次应将数据报发送给另外的路由器(更好的路由).</p>
</div>
</div>
</div>
</div>
<h3 id="icmp询问报文">ICMP询问报文<a class="headerlink" href="#icmp询问报文" title="Permanent link">¶</a></h3>
<p>ICMP询问报文主要用于探测网络状态或查询信息. 最著名的应用是 <strong>Ping</strong> 和 <strong>Traceroute</strong>.</p>
<ol>
<li>
<p><strong>回送请求和回答报文 (Echo Request / Echo Reply)</strong>:</p>
<ul>
<li>
<p><strong>Ping</strong> 命令就是使用这种报文来测试主机或路由器是否可达.</p>
</li>
<li>
<p>主机A向主机B发送"回送请求"报文, 主机B收到后必须向主机A发送"回送回答"报文.</p>
</li>
</ul>
</li>
<li>
<p><strong>时间戳请求和回答报文</strong>:</p>
<ul>
<li>用于进行时钟同步和测量时间.</li>
</ul>
</li>
</ol>
<div class="admonition example">
<p class="admonition-title">Traceroute (或 tracert) 的工作原理</p>
<p>Traceroute 用于跟踪数据包从源点到终点的路径. 它巧妙地利用了ICMP的<strong>时间超过</strong>和<strong>终点不可达</strong>报文.</p>
<ol>
<li>
<p>源主机向目的主机发送一连串的 IP 数据报 (封装的是无法交付的 UDP 报文).</p>
</li>
<li>
<p>第一个数据报的 TTL 设置为 1. 到达第一个路由器时, TTL 减为 0, 路由器丢弃该包并回送 <strong>ICMP 时间超过</strong> 报文. 源主机因此得到了第一个路由器的 IP.</p>
</li>
<li>
<p>第二个数据报的 TTL 设置为 2. 到达第二个路由器时, TTL 减为 0, 回送 <strong>ICMP 时间超过</strong> 报文.</p>
</li>
<li>
<p>...</p>
</li>
<li>
<p>当数据报最终到达目的主机时, TTL 即使不为 0, 但因为 UDP 端口不可达, 目的主机会回送 <strong>ICMP 终点不可达</strong> 报文.</p>
</li>
<li>
<p>源主机收到终点不可达报文后, 停止发送, 从而得到了完整的路径信息.</p>
</li>
</ol>
</div>
<hr>
<h2 id="vpn">VPN<a class="headerlink" href="#vpn" title="Permanent link">¶</a></h2>
<blockquote>
<p>VPN(Virtual Private Network)虚拟专用网络, 是指在公共网络上建立的、具有安全性的专用网络.</p>
</blockquote>
<p>专用网内,各主机的IP地址是私有的, 不能直接访问外网. </p>
<p>这些IP地址被称为专用地址,包括</p>
<ul>
<li>
<p>A类地址: 10.0.0.0 - 10.255.255.255</p>
</li>
<li>
<p>B类地址: 172.16.0.0 - 172.31.255.255</p>
</li>
<li>
<p>C类地址: 192.168.0.0 - 192.168.255.255</p>
</li>
</ul>
<p>因特网中所有的路由器,都不会转发专用地址的数据报.</p>
<h3 id="vpn的工作原理-隧道技术">VPN的工作原理 (隧道技术)<a class="headerlink" href="#vpn的工作原理-隧道技术" title="Permanent link">¶</a></h3>
<p>VPN利用<strong>隧道技术(Tunneling)</strong>实现两个专用网之间的通信. 核心思想是将专用网的IP数据报封装在因特网的IP数据报中.</p>
<pre class="mermaid"><code>sequenceDiagram
    participant HostA as 主机A (10.1.0.1)
    participant Router1 as 路由器R1 (125.1.2.3)
    participant Internet as 因特网
    participant Router2 as 路由器R2 (194.4.5.6)
    participant HostB as 主机B (10.2.0.1)

    Note over HostA, Router1: 内部专用网 A
    Note over Router2, HostB: 内部专用网 B

    HostA-&gt;&gt;Router1: 发送数据报 (源:10.1.0.1, 目:10.2.0.1)
    Note right of HostA: 这是一个普通的内部数据报

    Router1-&gt;&gt;Router1: 加密并封装
    Note right of Router1: 将整个内部数据报作为负载,&lt;br/&gt;封装在新的IP数据报中.&lt;br/&gt;新源:125.1.2.3, 新目:194.4.5.6

    Router1-&gt;&gt;Internet: 发送隧道数据报
    Internet-&gt;&gt;Router2: 转发隧道数据报

    Router2-&gt;&gt;Router2: 解封装并解密
    Note right of Router2: 剥去外层IP首部,&lt;br/&gt;取出内部数据报.

    Router2-&gt;&gt;HostB: 转发内部数据报 (源:10.1.0.1, 目:10.2.0.1)</code></pre>
<p><strong>过程详解</strong>:</p>
<ol>
<li>
<p><strong>发送</strong>: 机构A的主机A (10.1.0.1) 向机构B的主机B (10.2.0.1) 发送数据报.</p>
</li>
<li>
<p><strong>封装</strong>: 路由器R1收到后, 发现目的地址是另一个专用网的地址. R1将整个数据报进行加密, 然后作为负载封装在一个新的IP数据报中. 新数据报的源地址是R1的公网IP, 目的地址是R2的公网IP.</p>
</li>
<li>
<p><strong>传输</strong>: 这个封装后的数据报在因特网中传输, 就像普通数据报一样.</p>
</li>
<li>
<p><strong>解封</strong>: 路由器R2收到后, 剥去外层IP首部, 解密并还原出原始的内部数据报.</p>
</li>
<li>
<p><strong>转发</strong>: R2根据原始的目的地址 (10.2.0.1), 将数据报转发给主机B.</p>
</li>
</ol>
<h3 id="nat-网络地址转换">NAT (网络地址转换)<a class="headerlink" href="#nat-网络地址转换" title="Permanent link">¶</a></h3>
<p><strong>NAT (Network Address Translation)</strong> 是一种在IP数据报通过路由器或防火墙时重写源IP地址或目的IP地址的技术. 它主要用于解决IPv4地址短缺的问题, 同时也提供了一定的安全性(隐藏内部网络结构).</p>
<ol>
<li>
<p>基本NAT</p>
<p>基本NAT将内部网络的私有IP地址转换为公网IP地址. 这种转换通常是一对一的, 即一个内部主机占用一个公网IP.</p>
</li>
<li>
<p>NAPT (网络地址端口转换)</p>
<p><strong>NAPT (Network Address Port Translation)</strong>, 也常被称为 <strong>PAT</strong>, 是目前最常用的NAT类型. 它允许多个内部主机共享<strong>同一个</strong>公网IP地址, 通过不同的<strong>端口号</strong>来区分不同的连接.</p>
<p><strong>NAPT的工作流程</strong>:</p>
<ol>
<li>
<p><strong>离开专用网</strong>: 路由器将源IP地址(私有)和源端口号替换为路由器的公网IP地址和新的端口号.</p>
</li>
<li>
<p><strong>进入专用网</strong>: 路由器根据目的IP(公网)和目的端口号, 在<strong>NAT转换表</strong>中查找对应的内部主机IP和端口号, 并进行替换.</p>
</li>
</ol>
</li>
</ol>
<pre class="mermaid"><code>sequenceDiagram
    participant Host as 内部主机 (192.168.0.2:3000)
    participant NAT as NAT路由器 (公网IP: 203.0.113.5)
    participant Server as 外部服务器 (1.2.3.4:80)

    Note over NAT: NAT转换表:&lt;br/&gt;192.168.0.2:3000 &lt;--&gt; 203.0.113.5:5001

    Host-&gt;&gt;NAT: 发送请求&lt;br/&gt;(源:192.168.0.2:3000, 目:1.2.3.4:80)

    NAT-&gt;&gt;NAT: 查表并转换 (NAPT)
    Note right of NAT: 将源IP改为 203.0.113.5&lt;br/&gt;将源端口改为 5001

    NAT-&gt;&gt;Server: 转发请求&lt;br/&gt;(源:203.0.113.5:5001, 目:1.2.3.4:80)

    Server-&gt;&gt;NAT: 发送响应&lt;br/&gt;(源:1.2.3.4:80, 目:203.0.113.5:5001)

    NAT-&gt;&gt;NAT: 查表并还原
    Note right of NAT: 发现端口 5001 对应 192.168.0.2:3000&lt;br/&gt;还原目的IP和端口

    NAT-&gt;&gt;Host: 转发响应&lt;br/&gt;(源:1.2.3.4:80, 目:192.168.0.2:3000)</code></pre>
<hr>
<h2 id="ip多播">IP多播<a class="headerlink" href="#ip多播" title="Permanent link">¶</a></h2>
<blockquote>
<p>IP多播(Multicast)是IP网络中的一种数据传输方式, 允许数据报被发送给一组主机, 而不是单个主机.</p>
</blockquote>
<p>IP多播使用特殊的IP地址范围, 从224.0.0.0到239.255.255.255. </p>
<p>多播地址又可以分为预留的多播地址（永久多播地址）、全球范围可用的多播地址以及本地管理的多播地址[RFC 3330],范围是</p>
<ul>
<li>
<p>224.0.0.0 - 224.0.0.255</p>
</li>
<li>
<p>224.0.1.0 - 238.255.255.255</p>
</li>
<li>
<p>239.0.0.0 - 239.255.255.255</p>
</li>
</ul>
<hr>
<p>IP多播又可以分为在局域网内的硬件多播和在因特网中的多播</p>
<h3 id="硬件多播">硬件多播<a class="headerlink" href="#硬件多播" title="Permanent link">¶</a></h3>
<p>由于MAC地址中有多播MAC地址这种类型,因此只要把IP的多播地址映射为MAC的多播地址即可.</p>
<p>IANA拥有的以太网多播地址块的范围是 <code>01-00-5E-00-00-00</code> 到 <code>01-00-5E-7F-FF-FF</code>.</p>
<p><strong>映射规则</strong>:</p>
<ol>
<li>
<p>MAC地址的前25位是固定的: <code>01-00-5E</code> (前24位) + <code>0</code> (第25位).</p>
</li>
<li>
<p>IP多播地址的后23位直接映射到MAC地址的后23位.</p>
</li>
</ol>
<p>由于IP多播地址可变化的28比特的前5个比特无法映射到MAC多播地址，这会造成IP多播地址与多播MAC地址的映射关系并不是唯一的。因此, 存在 <strong>32:1</strong> 的映射关系. 也就是说, 32个不同的IP多播地址可能会映射到同一个MAC地址.</p>
<p><strong>过滤</strong>:</p>
<p>当网卡收到一个多播帧时, 硬件会检查MAC地址是否匹配. 如果匹配, 再由IP层软件检查IP地址是否真的是自己想要接收的.</p>
<h3 id="在因特网中的多播">在因特网中的多播<a class="headerlink" href="#在因特网中的多播" title="Permanent link">¶</a></h3>
<p>在因特网上进行多播会复杂一点,因为需要考虑数据报在经过路由器转发的问题. 主要涉及两种协议:</p>
<ol>
<li>
<p><strong>IGMP (Internet Group Management Protocol)</strong>:</p>
<ul>
<li>用于主机和与其直接相连的路由器之间.</li>
<li>主机使用IGMP告诉路由器它想接收哪个多播组的信息.</li>
</ul>
</li>
<li>
<p><strong>多播路由选择协议</strong>:</p>
<ul>
<li>用于路由器之间.</li>
<li>路由器之间交换信息, 以便构建多播转发树, 将数据报转发给所有组成员.</li>
</ul>
</li>
</ol>
<h4 id="igmp协议">IGMP协议<a class="headerlink" href="#igmp协议" title="Permanent link">¶</a></h4>
<p>IGMP协议让连接在本地局域网上的多播路由器知道本局域网上是否有主机(严格来说是主机上的某个进程)参加或退出了某个多播组.</p>
<ul>
<li>
<p><strong>工作阶段</strong>:</p>
<ol>
<li>
<p><strong>加入</strong>: 当主机加入新的多播组时, 向多播组的多播地址发送IGMP报文, 声明自己要成为该组成员.</p>
</li>
<li>
<p><strong>探询</strong>: 本地多播路由器周期性发送IGMP探询报文(Query).</p>
</li>
<li>
<p><strong>响应</strong>: 主机收到探询后, 如果它属于某个组, 就发送IGMP报告报文(Report).</p>
</li>
</ol>
</li>
</ul>
<h4 id="多播路由选择协议">多播路由选择协议<a class="headerlink" href="#多播路由选择协议" title="Permanent link">¶</a></h4>
<p>多播路由选择协议的主要任务是寻找一棵以源主机为根的<strong>多播转发树</strong>. 在多播转发树上, 每个分组在每条链路上只传送一次.</p>
<ul>
<li>
<p><strong>反向路径转发 (RPF, Reverse Path Forwarding)</strong>:</p>
<ul>
<li>
<p>为了防止环路和重复, 路由器在收到多播数据报时, 会检查: "如果我向源主机发送单播数据报, 下一跳是不是刚才发给我多播数据报的那个邻居?"</p>
</li>
<li>
<p>如果是, 则接受并转发; 否则, 丢弃.</p>
</li>
</ul>
</li>
</ul>
<div style="text-align: center;">
    <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../../../image/mac205.png" data-desc-position="bottom"><img src="../../../image/mac205.png" alt="IGMP" width="80%"></a>
</div>

<h2 id="ipv6">IPV6<a class="headerlink" href="#ipv6" title="Permanent link">¶</a></h2>
<blockquote>
<p>IPV4地址只有32位,早在2011年就已经耗尽,因此需要一个新的地址空间.</p>
</blockquote>
<h3 id="ipv6基本首部">IPv6基本首部<a class="headerlink" href="#ipv6基本首部" title="Permanent link">¶</a></h3>
<p>IPv6数据报的首部长度是固定的,为40字节. 相比IPv4, IPv6首部去掉了许多字段, 使得处理更加简单高效.</p>
<div style="text-align: center;">
    <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../../../image/mac211.png" data-desc-position="bottom"><img src="../../../image/mac211.png" width="50%"></a>
    <br>
    IPv6数据报首部格式
</div>

<ul>
<li>
<p><strong>版本(Version)</strong>: 4位, 指明了协议的版本, IPv6为6.</p>
</li>
<li>
<p><strong>通信量类(Traffic Class)</strong>: 8位, 类似于IPv4的服务类型(ToS), 用于区分不同的IPv6数据报的类别或优先级.</p>
</li>
<li>
<p><strong>流标号(Flow Label)</strong>: 20位, 用于标识属于同一个流(Flow)的数据报. 一个流是源主机和目的主机之间的一系列数据报.</p>
</li>
<li>
<p><strong>有效载荷长度(Payload Length)</strong>: 16位, 指明IPv6数据报除基本首部以外的字节数(即扩展首部+数据). 最大值为65535字节.</p>
</li>
<li>
<p><strong>下一个首部(Next Header)</strong>: 8位, 相当于IPv4的协议字段. 但它不仅可以指向高层协议(如TCP, UDP), 还可以指向下一个扩展首部.</p>
</li>
<li>
<p><strong>跳数限制(Hop Limit)</strong>: 8位, 类似于IPv4的TTL, 防止数据报在网络中无限循环. 每经过一个路由器, 该数值减1.</p>
</li>
<li>
<p><strong>源地址(Source Address)</strong>: 128位.</p>
</li>
<li>
<p><strong>目的地址(Destination Address)</strong>: 128位.</p>
</li>
</ul>
<p><strong>与IPv4首部的区别</strong>:</p>
<ol>
<li>
<p>取消了首部长度字段, 因为IPv6基本首部长度固定为40字节.</p>
</li>
<li>
<p>取消了分片相关字段(标识, 标志, 片偏移), IPv6只允许在源主机进行分片, 路由器不再分片.</p>
</li>
<li>
<p>取消了首部校验和字段,以此来加快路由器的处理速度(因为数据链路层和传输层已经有校验了).</p>
</li>
</ol>
<h3 id="ipv6扩展首部">IPv6扩展首部<a class="headerlink" href="#ipv6扩展首部" title="Permanent link">¶</a></h3>
<blockquote>
<p>扩展首部实际上是payload的一部分, 因此payload长度字段包括了扩展首部的长度.</p>
</blockquote>
<p>IPv6引入了扩展首部(Extension Header)的概念, 允许发送方在基本首部后面添加额外的信息.</p>
<p>扩展首部通过"下一个首部"字段进行链式连接. 基本首部的"下一个首部"表明了第一个拓展首部的协议号, 从而可以找到第一个拓展首部,后面也以此类推.</p>
<p>常见的扩展首部有:</p>
<ol>
<li>
<p><strong>逐跳选项首部(Hop-by-Hop Options Header)</strong>: 协议号0. 包含传送路径上每个路由器都必须检查的信息.</p>
</li>
<li>
<p><strong>路由首部(Routing Header)</strong>: 协议号43. 用于源路由选择.</p>
</li>
<li>
<p><strong>分片首部(Fragment Header)</strong>: 协议号44. 用于源主机对数据报进行分片.</p>
</li>
<li>
<p><strong>封装安全有效载荷首部(ESP)</strong>: 协议号50. 提供加密和完整性保护.</p>
</li>
<li>
<p><strong>鉴别首部(AH)</strong>: 协议号51. 提供完整性保护和源鉴别.</p>
</li>
<li><strong>目的站选项首部(Destination Options Header)</strong>: 协议号60. 包含只有目的主机才需要检查的信息.</li>
</ol>
<p><strong>出现顺序</strong>:</p>
<p>通常建议的扩展首部出现顺序如下:
IPv6基本首部 -&gt; 逐跳选项 -&gt; 路由 -&gt; 分片 -&gt; 鉴别 -&gt; 封装安全 -&gt; 目的站选项 -&gt; 上层协议</p>
<h3 id="表示ipv6地址">表示IPV6地址<a class="headerlink" href="#表示ipv6地址" title="Permanent link">¶</a></h3>
<p>对于128比特的一个IPV6地址, 有以下几种表示方法:</p>
<ol>
<li>
<p><strong>冒号十六进制表示法</strong>:</p>
<p>将128位地址分为8组, 每组16位. 每组用4个十六进制数表示, 组与组之间用冒号<code>:</code>分隔.</p>
<p>例如: <code>ABCD:EF01:2345:6789:ABCD:EF01:2345:6789</code></p>
</li>
<li>
<p><strong>零压缩表示法</strong>:</p>
<p>为了简化书写, IPv6支持零压缩:</p>
<ul>
<li>
<p><strong>省略前导零</strong>: 每组中的前导零可以省略. 例如 <code>00AB</code> 可以写成 <code>AB</code>.</p>
</li>
<li>
<p><strong>双冒号压缩</strong>: 一连串连续的0可以使用双冒号<code>::</code>表示. <strong>注意</strong>: 在一个地址中, <code>::</code> 只能出现一次, 以免产生歧义.</p>
</li>
</ul>
<p>例如: <code>FF01:0:0:0:0:0:0:101</code> 可以压缩为 <code>FF01::101</code>.</p>
</li>
<li>
<p><strong>CIDR斜线记法</strong>:</p>
<p>与IPv4类似, IPv6也使用斜线记法来表示网络前缀.</p>
<p>例如: <code>12AB::CD30:0:0:0:0/60</code> 表示前60位是网络前缀.</p>
</li>
</ol>
<hr>
<p>IPV6数据报的目的地址有三种类型:</p>
<ol>
<li>
<p><strong>单播地址</strong>: 指向单个主机.</p>
</li>
<li>
<p><strong>组播地址</strong>: 指向一组主机.</p>
</li>
<li>
<p><strong>任播地址</strong>: 指向一组主机中的一个.</p>
</li>
</ol>
<h3 id="常见的ipv6地址类型">常见的IPv6地址类型<a class="headerlink" href="#常见的ipv6地址类型" title="Permanent link">¶</a></h3>
<ol>
<li>
<p><strong>未指明地址 (Unspecified Address)</strong>:</p>
<ul>
<li><code>::/128</code> (全0)</li>
<li>表示"没有地址", 通常作为源地址在主机尚未获得IP地址时(如发送DHCP请求)使用. 不能作为目的地址.</li>
</ul>
</li>
<li>
<p><strong>环回地址 (Loopback Address)</strong>:</p>
<ul>
<li><code>::1/128</code></li>
<li>作用与IPv4的 <code>127.0.0.1</code> 相同, 用于本机进程间的通信. 数据报不会发送到网络上.</li>
</ul>
</li>
<li>
<p><strong>多播地址 (Multicast Address)</strong>:</p>
<ul>
<li><code>FF00::/8</code></li>
<li>IPv6没有广播地址, 广播的功能由多播来完成.</li>
</ul>
</li>
<li>
<p><strong>本地链路单播地址 (Link-Local Unicast Address)</strong>:</p>
<ul>
<li><code>FE80::/10</code></li>
<li>用于同一链路上的主机通信(如邻居发现). 路由器不会转发以本地链路地址为源或目的的数据报. 自动配置时通常会生成一个本地链路地址.</li>
</ul>
</li>
<li>
<p><strong>全球单播地址 (Global Unicast Address)</strong>:</p>
<ul>
<li>
<p>相当于IPv4的公网地址, 可以在全球互联网上路由.</p>
</li>
<li>
<p>采用三级结构,包括48比特的全球路由选择前缀,16比特的子网标识符与64比特的接口标识符.</p>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="从ipv4向ipv6过渡">从IPv4向IPv6过渡<a class="headerlink" href="#从ipv4向ipv6过渡" title="Permanent link">¶</a></h3>
<p>从IPv4向IPv6过渡只能采用逐步演进的办法, 同时还必须使新安装的IPv6系统能够向后兼容. IPv6系统必须能够接收和转发IPv4分组, 并且能够为IPv4分组选择路由.</p>
<p>主要采用下列两种策略:</p>
<h4 id="双协议栈-dual-stack">双协议栈 (Dual Stack)<a class="headerlink" href="#双协议栈-dual-stack" title="Permanent link">¶</a></h4>
<p>双协议栈是指在一台设备上同时装有IPv4和IPv6两个协议栈.</p>
<ul>
<li><strong>原理</strong>: 该设备分别配置了一个IPv4地址和一个IPv6地址, 因此既能和IPv4网络通信, 又能和IPv6网络通信.</li>
<li><strong>工作方式</strong>:<ul>
<li>双协议栈主机在与IPv6主机通信时采用IPv6地址.</li>
<li>在与IPv4主机通信时采用IPv4地址.</li>
<li>主机通过应用层的域名系统(DNS)获知目的主机采用的是哪种地址. 若DNS返回的是IPv4地址, 则使用IPv4地址; 若返回的是IPv6地址, 则使用IPv6地址.</li>
</ul>
</li>
</ul>
<h4 id="隧道技术-tunneling">隧道技术 (Tunneling)<a class="headerlink" href="#隧道技术-tunneling" title="Permanent link">¶</a></h4>
<p>隧道技术是指在IPv6数据报要进入IPv4网络时, 把整个IPv6数据报封装成IPv4数据报的数据部分.</p>
<ul>
<li><strong>原理</strong>: 使原来的IPv6数据报就好像在IPv4网络的隧道中传输.</li>
<li><strong>工作方式</strong>:<ul>
<li><strong>封装</strong>: 当IPv6数据报要进入IPv4网络时, 路由器将其封装在IPv4数据报中 (协议号为41).</li>
<li><strong>解封</strong>: 当IPv4数据报离开IPv4网络时, 对端路由器剥去IPv4首部, 将其数据部分(即原来的IPv6数据报)交给主机的IPv6协议.</li>
</ul>
</li>
</ul>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="2025年12月4日 08:08:00 UTC">2025年12月4日</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="创建日期">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="2025年11月12日 04:49:52 UTC">2025年11月12日</span>
  </span>

    
    
    
  </aside>


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        此页面有帮助吗？
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="这玩意有点用" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"></path></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="这玩意真有用吗" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"></path></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              
              
                
                
              
              谢谢你的反馈！
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              
              
                
                
              
              呜呜呜，别骂了别骂了，请联系我！ <a href="mailto:pxxhello@gmail.com">俺的gmail</a>
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


  <h2 id="__comments">评论</h2>
  <!-- Insert generated snippet here -->
  <script src="https://giscus.app/client.js" data-repo="starstone3/starstone3.github.io" data-repo-id="R_kgDOM1N9qQ" data-category="Announcements" data-category-id="DIC_kwDOM1N9qc4Cir1z" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="zh-CN" crossorigin="anonymous" async>
</script>
  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "transparent_dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚">
        
          
          <a href="../ch3/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 第三章:数据链路层">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                第三章:数据链路层
              </div>
            </div>
          </a>
        
        
          
          <a href="../ch5/" class="md-footer__link md-footer__link--next" aria-label="下一页: 第五章:运输层">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                第五章:运输层
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2024 starstone3
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["announce.dismiss", "navigation.instant", "navigation.instant.prefetch", "navigation.tracking", "navigation.tabs", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "search.share", "navigation.indexes", "content.tabs.link", "content.tooltips", "content.code.copy", "content.code.select", "content.code.annotate", "toc.follow"], "search": "../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../../../_js/extra.js"></script>
      
        <script src="../../../_js/mathjax.js"></script>
      
        <script src="../../../_js/katex.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
        <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>